{% import '@Ui/ui_library/_macros.html.twig' as ui %}

<div class="space-y-6">
    {# Props Documentation #}
    {{ ui.props([
        { name: 'fields', type: 'array', default: '[]', description: 'Array of field definitions (name, label)' },
        { name: 'items', type: 'array', default: '[]', description: 'Array of data items to display' },
        { name: 'hideHeader', type: 'boolean', default: 'false', description: 'Hide the table header row' },
        { name: 'hideFooter', type: 'boolean', default: 'false', description: 'Hide the table footer row' },
        { name: 'class', type: 'string', default: "''", description: 'Additional CSS classes' },
    ]) }}

    {# Slots Documentation #}
    {{ ui.slots([
        { name: 'thead_{field}', description: 'Custom header cell content for specific field' },
        { name: 'tbody_{field}', description: 'Custom body cell content for specific field (has access to item variable)' },
        { name: 'tbody_{field}_{index}', description: 'Custom content for specific field and row index' },
    ]) }}

    {# Basic Data Table #}
    {% set basicPreview %}
        {% set users = [
            { name: 'John Doe', email: 'john@example.com', role: 'Admin' },
            { name: 'Jane Smith', email: 'jane@example.com', role: 'Editor' },
            { name: 'Bob Wilson', email: 'bob@example.com', role: 'User' },
        ] %}
        <twig:ui:data-table
            :fields="[
                { name: 'name', label: 'Name' },
                { name: 'email', label: 'Email' },
                { name: 'role', label: 'Role' }
            ]"
            :items="users"
        />
    {% endset %}
    {% set basicCode %}{% verbatim %}{% set users = [
    { name: 'John Doe', email: 'john@example.com', role: 'Admin' },
    { name: 'Jane Smith', email: 'jane@example.com', role: 'Editor' },
    { name: 'Bob Wilson', email: 'bob@example.com', role: 'User' },
] %}

<twig:ui:data-table
    :fields="[
        { name: 'name', label: 'Name' },
        { name: 'email', label: 'Email' },
        { name: 'role', label: 'Role' }
    ]"
    :items="users"
/>{% endverbatim %}{% endset %}
    {{ ui.story('Basic Data Table', basicPreview, basicCode) }}

    {# Simple Field Names #}
    {% set simplePreview %}
        {% set products = [
            { product: 'Widget A', price: '$29.99', stock: '150' },
            { product: 'Widget B', price: '$49.99', stock: '75' },
            { product: 'Widget C', price: '$19.99', stock: '200' },
        ] %}
        <twig:ui:data-table
            :fields="['product', 'price', 'stock']"
            :items="products"
        />
    {% endset %}
    {% set simpleCode %}{% verbatim %}{# Simple field names (uses field name as label) #}
<twig:ui:data-table
    :fields="['product', 'price', 'stock']"
    :items="products"
/>{% endverbatim %}{% endset %}
    {{ ui.story('Simple Field Names', simplePreview, simpleCode) }}

    {# With Custom Cell Content #}
    {% set customPreview %}
        {% set users = [
            { name: 'John Doe', status: 'active', role: 'Admin' },
            { name: 'Jane Smith', status: 'inactive', role: 'Editor' },
            { name: 'Bob Wilson', status: 'active', role: 'User' },
        ] %}
        <twig:ui:data-table
            :fields="[
                { name: 'name', label: 'Name' },
                { name: 'status', label: 'Status' },
                { name: 'role', label: 'Role' }
            ]"
            :items="users"
        >
            {% block tbody_status %}
                <twig:ui:badge :variant="item.status == 'active' ? 'success' : 'secondary'">
                    {{ item.status }}
                </twig:ui:badge>
            {% endblock %}
        </twig:ui:data-table>
    {% endset %}
    {% set customCode %}{% verbatim %}<twig:ui:data-table :fields="fields" :items="users">
    {% block tbody_status %}
        <twig:ui:badge :variant="item.status == 'active' ? 'success' : 'secondary'">
            {{ item.status }}
        </twig:ui:badge>
    {% endblock %}
</twig:ui:data-table>{% endverbatim %}{% endset %}
    {{ ui.story('With Custom Cell Content', customPreview, customCode) }}

    {# Empty State #}
    {% set emptyPreview %}
        <twig:ui:data-table
            :fields="[
                { name: 'name', label: 'Name' },
                { name: 'email', label: 'Email' }
            ]"
            :items="[]"
        />
    {% endset %}
    {% set emptyCode %}{% verbatim %}<twig:ui:data-table
    :fields="fields"
    :items="[]"
/>
{# Shows "Aucun résultat trouvé" when empty #}{% endverbatim %}{% endset %}
    {{ ui.story('Empty State', emptyPreview, emptyCode) }}

    {# Related Components #}
    <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4">
        <h4 class="font-semibold text-blue-900 dark:text-blue-100 mb-2">Related Components</h4>
        <ul class="text-sm text-blue-800 dark:text-blue-200 space-y-1">
            <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">table</code> - Basic table component</li>
            <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">table:selectable</code> - Table with row selection</li>
            <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">responsive-list</code> - Responsive table/card view</li>
            <li><code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">mobile-list</code> - Mobile-optimized list view</li>
        </ul>
    </div>
</div>
