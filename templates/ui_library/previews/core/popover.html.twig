{% import '@Ui/ui_library/_macros.html.twig' as ui %}

<div class="space-y-6">
    {# Props Documentation #}
    {{ ui.props([
        { name: 'position', type: "'bottom' | 'top' | 'left' | 'right'", default: "'bottom'", description: 'Position of the popover relative to trigger' },
        { name: 'hover', type: 'boolean', default: 'false', description: 'Open on hover instead of click' },
        { name: 'width', type: "'auto' | 'sm' | 'md' | 'lg' | 'xl' | 'full'", default: "'auto'", description: 'Width preset for the popover' },
        { name: 'offset', type: 'number', default: '8', description: 'Distance from trigger element in pixels' },
        { name: 'arrow', type: 'boolean', default: 'false', description: 'Show arrow pointing to trigger' },
        { name: 'closeOnClickOutside', type: 'boolean', default: 'true', description: 'Close when clicking outside' },
        { name: 'variant', type: "'default' | 'dark' | 'transparent'", default: "'default'", description: 'Visual style variant' },
        { name: 'class', type: 'string', default: "''", description: 'Additional CSS classes' },
    ]) }}

    {# Slots Documentation #}
    {{ ui.slots([
        { name: 'trigger', description: 'The element that triggers the popover (button, link, etc.)' },
        { name: 'content', description: 'The popover content (default slot)' },
    ]) }}

    {# Basic Popover #}
    {% set basicPreview %}
        <div class="flex justify-center py-8">
            <twig:ui:popover>
                <twig:block name="trigger">
                    <twig:ui:button>Click me</twig:ui:button>
                </twig:block>
                <p class="text-sm text-gray-700 dark:text-gray-300">This is a popover content.</p>
            </twig:ui:popover>
        </div>
    {% endset %}
    {% set basicCode %}{% verbatim %}<twig:ui:popover>
    {% block trigger %}
        <twig:ui:button>Click me</twig:ui:button>
    {% endblock %}
    {% block content %}
        <p class="text-sm text-gray-700 dark:text-gray-300">This is a popover content.</p>
    {% endblock %}
</twig:ui:popover>{% endverbatim %}{% endset %}
    {{ ui.story('Basic Popover', basicPreview, basicCode) }}

    {# Hover Popover #}
    {% set hoverPreview %}
        <div class="flex justify-center py-8">
            <twig:ui:popover hover>
                <twig:block name="trigger">
                    <twig:ui:button variant="outline">Hover me</twig:ui:button>
                </twig:block>
                <p class="text-sm text-gray-700 dark:text-gray-300">This appears on hover.</p>
            </twig:ui:popover>
        </div>
    {% endset %}
    {% set hoverCode %}{% verbatim %}<twig:ui:popover hover>
    {% block trigger %}
        <twig:ui:button variant="outline">Hover me</twig:ui:button>
    {% endblock %}
    {% block content %}
        <p class="text-sm text-gray-700 dark:text-gray-300">This appears on hover.</p>
    {% endblock %}
</twig:ui:popover>{% endverbatim %}{% endset %}
    {{ ui.story('Hover Popover', hoverPreview, hoverCode) }}

    {# Width Options - Code Example #}
    {% set widthsPreview %}
        <div class="bg-gray-100 dark:bg-gray-800 rounded-lg p-6">
            <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">
                Popover supports different width options: <code class="bg-gray-200 dark:bg-gray-700 px-1 rounded">auto</code>,
                <code class="bg-gray-200 dark:bg-gray-700 px-1 rounded">sm</code>,
                <code class="bg-gray-200 dark:bg-gray-700 px-1 rounded">md</code>,
                <code class="bg-gray-200 dark:bg-gray-700 px-1 rounded">lg</code>
            </p>
            <div class="grid grid-cols-4 gap-2 text-center text-xs">
                <div class="bg-white dark:bg-gray-900 rounded p-2">auto<br><span class="text-gray-400">min-w-48</span></div>
                <div class="bg-white dark:bg-gray-900 rounded p-2">sm<br><span class="text-gray-400">w-48</span></div>
                <div class="bg-white dark:bg-gray-900 rounded p-2">md<br><span class="text-gray-400">w-64</span></div>
                <div class="bg-white dark:bg-gray-900 rounded p-2">lg<br><span class="text-gray-400">w-80</span></div>
            </div>
        </div>
    {% endset %}
    {% set widthsCode %}{% verbatim %}<twig:ui:popover width="sm">...</twig:ui:popover>
<twig:ui:popover width="md">...</twig:ui:popover>
<twig:ui:popover width="lg">...</twig:ui:popover>{% endverbatim %}{% endset %}
    {{ ui.story('Width Options', widthsPreview, widthsCode) }}

    {# With Arrow #}
    {% set arrowPreview %}
        <div class="flex justify-center py-8">
            <twig:ui:popover arrow>
                <twig:block name="trigger">
                    <twig:ui:button variant="outline">With Arrow</twig:ui:button>
                </twig:block>
                <p class="text-sm text-gray-700 dark:text-gray-300">Notice the arrow pointing to the button.</p>
            </twig:ui:popover>
        </div>
    {% endset %}
    {% set arrowCode %}{% verbatim %}<twig:ui:popover arrow>
    {% block trigger %}
        <twig:ui:button variant="outline">With Arrow</twig:ui:button>
    {% endblock %}
    {% block content %}
        <p>Notice the arrow pointing to the button.</p>
    {% endblock %}
</twig:ui:popover>{% endverbatim %}{% endset %}
    {{ ui.story('With Arrow', arrowPreview, arrowCode) }}

    {# Variant Styles #}
    {% set variantsPreview %}
        <div class="flex justify-center gap-4 py-8">
            <twig:ui:popover variant="default">
                <twig:block name="trigger">
                    <twig:ui:button variant="outline">Default</twig:ui:button>
                </twig:block>
                <p class="text-sm text-gray-700 dark:text-gray-300">Default light variant.</p>
            </twig:ui:popover>
            <twig:ui:popover variant="dark">
                <twig:block name="trigger">
                    <twig:ui:button variant="outline">Dark</twig:ui:button>
                </twig:block>
                <p class="text-sm">Dark variant popover.</p>
            </twig:ui:popover>
        </div>
    {% endset %}
    {% set variantsCode %}{% verbatim %}<twig:ui:popover variant="default">...</twig:ui:popover>
<twig:ui:popover variant="dark">...</twig:ui:popover>{% endverbatim %}{% endset %}
    {{ ui.story('Variant Styles', variantsPreview, variantsCode) }}

    {# Position Examples #}
    {% set positionsPreview %}
        <div class="flex flex-wrap justify-center gap-4 py-12">
            <twig:ui:popover position="top">
                <twig:block name="trigger">
                    <twig:ui:button variant="outline" size="sm">Top</twig:ui:button>
                </twig:block>
                <p class="text-sm text-gray-700 dark:text-gray-300">Popover on top</p>
            </twig:ui:popover>
            <twig:ui:popover position="bottom">
                <twig:block name="trigger">
                    <twig:ui:button variant="outline" size="sm">Bottom</twig:ui:button>
                </twig:block>
                <p class="text-sm text-gray-700 dark:text-gray-300">Popover on bottom</p>
            </twig:ui:popover>
            <twig:ui:popover position="left">
                <twig:block name="trigger">
                    <twig:ui:button variant="outline" size="sm">Left</twig:ui:button>
                </twig:block>
                <p class="text-sm text-gray-700 dark:text-gray-300">Popover on left</p>
            </twig:ui:popover>
            <twig:ui:popover position="right">
                <twig:block name="trigger">
                    <twig:ui:button variant="outline" size="sm">Right</twig:ui:button>
                </twig:block>
                <p class="text-sm text-gray-700 dark:text-gray-300">Popover on right</p>
            </twig:ui:popover>
        </div>
    {% endset %}
    {% set positionsCode %}{% verbatim %}<twig:ui:popover position="top">...</twig:ui:popover>
<twig:ui:popover position="bottom">...</twig:ui:popover>
<twig:ui:popover position="left">...</twig:ui:popover>
<twig:ui:popover position="right">...</twig:ui:popover>{% endverbatim %}{% endset %}
    {{ ui.story('Positions', positionsPreview, positionsCode) }}
</div>
