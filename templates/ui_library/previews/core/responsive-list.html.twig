{% import '@Ui/ui_library/_macros.html.twig' as ui %}

<div class="space-y-6">
    {# Props Documentation #}
    {{ ui.props([
        { name: 'items', type: 'array', default: '[]', description: 'Array of items to display' },
        { name: 'fields', type: 'array', default: '[]', description: 'Array of field definitions (name, label)' },
        { name: 'keyField', type: 'string', default: "'id'", description: 'Field to use as unique key for each item' },
        { name: 'selectable', type: 'boolean', default: 'false', description: 'Enable row selection' },
        { name: 'showActions', type: 'boolean', default: 'false', description: 'Show actions column/section' },
        { name: 'loading', type: 'boolean', default: 'false', description: 'Show loading skeleton' },
        { name: 'loadingRows', type: 'number', default: '5', description: 'Number of skeleton rows when loading' },
        { name: 'breakpoint', type: "'sm' | 'md' | 'lg' | 'xl'", default: "'md'", description: 'Breakpoint to switch from cards to table' },
        { name: 'emptyLabel', type: 'string', default: "'No items found'", description: 'Text to show when no items' },
        { name: 'class', type: 'string', default: "''", description: 'Additional CSS classes' },
    ]) }}

    {# Slots Documentation #}
    {{ ui.slots([
        { name: 'thead', description: 'Custom table header content' },
        { name: 'tbody', description: 'Custom table body content' },
        { name: 'tfoot', description: 'Custom table footer content' },
        { name: 'tbody_actions', description: 'Action buttons for table rows' },
        { name: 'mobile_content', description: 'Custom mobile card content' },
        { name: 'mobile_actions', description: 'Action buttons for mobile cards' },
        { name: 'empty', description: 'Custom empty state for desktop' },
        { name: 'mobile_empty', description: 'Custom empty state for mobile' },
    ]) }}

    {# Behavior Note #}
    <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6">
        <h4 class="font-semibold text-blue-900 dark:text-blue-100 mb-2">Responsive Behavior</h4>
        <p class="text-sm text-blue-800 dark:text-blue-200">
            This component renders as a <strong>table on desktop</strong> (above the breakpoint) and as <strong>cards on mobile</strong> (below the breakpoint).
            Resize your browser to see the different views.
        </p>
    </div>

    {# Basic Responsive List #}
    {% set basicPreview %}
        {% set users = [
            { id: 1, name: 'John Doe', email: 'john@example.com', role: 'Admin' },
            { id: 2, name: 'Jane Smith', email: 'jane@example.com', role: 'Editor' },
            { id: 3, name: 'Bob Wilson', email: 'bob@example.com', role: 'User' },
        ] %}
        <twig:ui:responsive-list
            :fields="[
                { name: 'name', label: 'Name' },
                { name: 'email', label: 'Email' },
                { name: 'role', label: 'Role' }
            ]"
            :items="users"
        />
    {% endset %}
    {% set basicCode %}{% verbatim %}{% set users = [
    { id: 1, name: 'John Doe', email: 'john@example.com', role: 'Admin' },
    ...
] %}

<twig:ui:responsive-list
    :fields="[
        { name: 'name', label: 'Name' },
        { name: 'email', label: 'Email' },
        { name: 'role', label: 'Role' }
    ]"
    :items="users"
/>{% endverbatim %}{% endset %}
    {{ ui.story('Basic Responsive List', basicPreview, basicCode) }}

    {# With Actions #}
    {% set actionsPreview %}
        {% set products = [
            { id: 1, product: 'Widget A', price: '$29.99', stock: '150' },
            { id: 2, product: 'Widget B', price: '$49.99', stock: '75' },
        ] %}
        <twig:ui:responsive-list
            :fields="[
                { name: 'product', label: 'Product' },
                { name: 'price', label: 'Price' },
                { name: 'stock', label: 'Stock' }
            ]"
            :items="products"
            :showActions="true"
        >
            {% block tbody_actions %}
                <twig:ui:button size="sm" variant="ghost">Edit</twig:ui:button>
            {% endblock %}
            {% block mobile_actions %}
                <twig:ui:button size="sm" variant="outline">Edit</twig:ui:button>
            {% endblock %}
        </twig:ui:responsive-list>
    {% endset %}
    {% set actionsCode %}{% verbatim %}<twig:ui:responsive-list
    :fields="fields"
    :items="products"
    :showActions="true"
>
    {% block tbody_actions %}
        <twig:ui:button size="sm" variant="ghost">Edit</twig:ui:button>
    {% endblock %}
    {% block mobile_actions %}
        <twig:ui:button size="sm" variant="outline">Edit</twig:ui:button>
    {% endblock %}
</twig:ui:responsive-list>{% endverbatim %}{% endset %}
    {{ ui.story('With Actions', actionsPreview, actionsCode) }}

    {# Custom Breakpoint #}
    {% set breakpointPreview %}
        {% set items = [
            { id: 1, title: 'Item 1', status: 'Active' },
            { id: 2, title: 'Item 2', status: 'Pending' },
        ] %}
        <div class="space-y-4">
            <p class="text-sm text-gray-600 dark:text-gray-400">
                Use <code class="bg-gray-100 dark:bg-gray-700 px-1 rounded">breakpoint="lg"</code> to switch at a larger screen size.
            </p>
            <twig:ui:responsive-list
                :fields="[{ name: 'title', label: 'Title' }, { name: 'status', label: 'Status' }]"
                :items="items"
                breakpoint="lg"
            />
        </div>
    {% endset %}
    {% set breakpointCode %}{% verbatim %}<twig:ui:responsive-list
    :fields="fields"
    :items="items"
    breakpoint="lg"  {# Options: sm, md (default), lg, xl #}
/>{% endverbatim %}{% endset %}
    {{ ui.story('Custom Breakpoint', breakpointPreview, breakpointCode) }}

    {# Loading State #}
    {% set loadingPreview %}
        <twig:ui:responsive-list
            :fields="[{ name: 'name', label: 'Name' }, { name: 'email', label: 'Email' }]"
            :items="[]"
            :loading="true"
            :loadingRows="3"
        />
    {% endset %}
    {% set loadingCode %}{% verbatim %}<twig:ui:responsive-list
    :fields="fields"
    :items="[]"
    :loading="true"
    :loadingRows="3"
/>{% endverbatim %}{% endset %}
    {{ ui.story('Loading State', loadingPreview, loadingCode) }}

    {# Empty State #}
    {% set emptyPreview %}
        <twig:ui:responsive-list
            :fields="[{ name: 'name', label: 'Name' }]"
            :items="[]"
            emptyLabel="No results found"
        />
    {% endset %}
    {% set emptyCode %}{% verbatim %}<twig:ui:responsive-list
    :fields="fields"
    :items="[]"
    emptyLabel="No results found"
/>{% endverbatim %}{% endset %}
    {{ ui.story('Empty State', emptyPreview, emptyCode) }}
</div>
