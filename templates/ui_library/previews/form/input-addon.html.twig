{% import '@Ui/ui_library/_macros.html.twig' as ui %}

<div class="space-y-6">
    {# Props Documentation #}
    {{ ui.props([
        { name: 'size', type: "'sm' | 'md' | 'lg'", default: "'md'", description: 'Input size' },
        { name: 'variant', type: "'default' | 'filled' | 'flushed'", default: "'default'", description: 'Visual variant' },
        { name: 'rounded', type: "'none' | 'sm' | 'md' | 'lg' | 'xl' | 'full'", default: "'lg'", description: 'Border radius' },
        { name: 'divide', type: 'boolean', default: 'false', description: 'Show dividers between addons' },
        { name: 'class', type: 'string', default: "''", description: 'Additional CSS classes' },
        { name: '...attrs', type: 'mixed', default: '-', description: 'All other attributes forwarded to the input' },
    ]) }}

    {# Nested Attributes Documentation #}
    {{ ui.slots([
        { name: 'wrapper:*', description: 'Attributes passed to the outer container' },
        { name: 'before:*', description: 'Attributes passed to the before slot wrapper' },
        { name: 'after:*', description: 'Attributes passed to the after slot wrapper' },
        { name: '(root)', description: 'All other attributes passed to the input element' },
    ]) }}

    {# Blocks Documentation #}
    {{ ui.slots([
        { name: '{% block before %}', description: 'Content before the input (icons, labels, buttons)' },
        { name: '{% block content %}', description: 'Main content (default: input element)' },
        { name: '{% block after %}', description: 'Content after the input (icons, buttons, text)' },
    ]) }}

    {# Description #}
    <div class="prose prose-sm dark:prose-invert max-w-none mb-6">
        <p>
            The Input Addon component wraps an input with optional before/after addons.
            It provides a unified wrapper with consistent styling and supports dividers between sections.
        </p>
    </div>

    {# Basic with Icon Before #}
    {% set iconBeforePreview %}
        <div class="max-w-md">
            <twig:ui:input-addon name="search" placeholder="Search...">
                <twig:block name="before">
                    <twig:ux:icon name="heroicons:magnifying-glass" class="size-5 text-gray-400" />
                </twig:block>
            </twig:ui:input-addon>
        </div>
    {% endset %}
    {% set iconBeforeCode %}{% verbatim %}<twig:ui:input-addon name="search" placeholder="Search...">
    <twig:block name="before">
        <twig:ux:icon name="heroicons:magnifying-glass" class="size-5 text-gray-400" />
    </twig:block>
</twig:ui:input-addon>{% endverbatim %}{% endset %}
    {{ ui.story('Icon Before', iconBeforePreview, iconBeforeCode) }}

    {# Button After #}
    {% set buttonAfterPreview %}
        <div class="max-w-md">
            <twig:ui:input-addon name="search" placeholder="Search...">
                <twig:block name="after">
                    <twig:ui:button size="sm">Search</twig:ui:button>
                </twig:block>
            </twig:ui:input-addon>
        </div>
    {% endset %}
    {% set buttonAfterCode %}{% verbatim %}<twig:ui:input-addon name="search" placeholder="Search...">
    <twig:block name="after">
        <twig:ui:button size="sm">Search</twig:ui:button>
    </twig:block>
</twig:ui:input-addon>{% endverbatim %}{% endset %}
    {{ ui.story('Button After', buttonAfterPreview, buttonAfterCode) }}

    {# Text Prefix #}
    {% set textPrefixPreview %}
        <div class="max-w-md">
            <twig:ui:input-addon name="domain" placeholder="example.com" before:class="bg-gray-100 dark:bg-gray-800 -ml-px rounded-l-lg border-r border-gray-300 dark:border-gray-700">
                <twig:block name="before">
                    <span class="text-gray-500 text-sm">https://</span>
                </twig:block>
            </twig:ui:input-addon>
        </div>
    {% endset %}
    {% set textPrefixCode %}{% verbatim %}<twig:ui:input-addon name="domain" placeholder="example.com" before:class="bg-gray-100 -ml-px rounded-l-lg border-r border-gray-300">
    <twig:block name="before">
        <span class="text-gray-500 text-sm">https://</span>
    </twig:block>
</twig:ui:input-addon>{% endverbatim %}{% endset %}
    {{ ui.story('Text Prefix', textPrefixPreview, textPrefixCode) }}

    {# Text Suffix #}
    {% set textSuffixPreview %}
        <div class="max-w-md">
            <twig:ui:input-addon name="price" placeholder="0.00" type="number" after:class="bg-gray-100 dark:bg-gray-800 -mr-px rounded-r-lg border-l border-gray-300 dark:border-gray-700">
                <twig:block name="after">
                    <span class="text-gray-500 text-sm">EUR</span>
                </twig:block>
            </twig:ui:input-addon>
        </div>
    {% endset %}
    {% set textSuffixCode %}{% verbatim %}<twig:ui:input-addon name="price" placeholder="0.00" type="number" after:class="bg-gray-100 -mr-px rounded-r-lg border-l border-gray-300">
    <twig:block name="after">
        <span class="text-gray-500 text-sm">EUR</span>
    </twig:block>
</twig:ui:input-addon>{% endverbatim %}{% endset %}
    {{ ui.story('Text Suffix', textSuffixPreview, textSuffixCode) }}

    {# Copy to Clipboard #}
    {% set copyPreview %}
        <div class="max-w-md">
            <twig:ui:input-addon name="code" value="ABC-123-XYZ" :readonly="true" :divide="true">
                <twig:block name="after">
                    <button type="button" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                        <twig:ux:icon name="heroicons:clipboard" class="size-5" />
                    </button>
                </twig:block>
            </twig:ui:input-addon>
        </div>
    {% endset %}
    {% set copyCode %}{% verbatim %}<twig:ui:input-addon name="code" value="ABC-123-XYZ" :readonly="true" :divide="true">
    <twig:block name="after">
        <button type="button" class="text-gray-400 hover:text-gray-600">
            <twig:ux:icon name="heroicons:clipboard" class="size-5" />
        </button>
    </twig:block>
</twig:ui:input-addon>{% endverbatim %}{% endset %}
    {{ ui.story('Copy to Clipboard', copyPreview, copyCode) }}

    {# Both Before and After #}
    {% set bothPreview %}
        <div class="max-w-md">
            <twig:ui:input-addon name="amount" placeholder="0.00" type="number" :divide="true">
                <twig:block name="before">
                    <span class="text-gray-500 font-medium">$</span>
                </twig:block>
                <twig:block name="after">
                    <span class="text-gray-400 text-sm">USD</span>
                </twig:block>
            </twig:ui:input-addon>
        </div>
    {% endset %}
    {% set bothCode %}{% verbatim %}<twig:ui:input-addon name="amount" placeholder="0.00" type="number" :divide="true">
    <twig:block name="before">
        <span class="text-gray-500 font-medium">$</span>
    </twig:block>
    <twig:block name="after">
        <span class="text-gray-400 text-sm">USD</span>
    </twig:block>
</twig:ui:input-addon>{% endverbatim %}{% endset %}
    {{ ui.story('Both Before and After', bothPreview, bothCode) }}

    {# With Dividers #}
    {% set dividePreview %}
        <div class="max-w-md">
            <twig:ui:input-addon name="phone" placeholder="Phone number" :divide="true">
                <twig:block name="before">
                    <span class="text-gray-500 text-sm">+1</span>
                </twig:block>
                <twig:block name="after">
                    <twig:ux:icon name="heroicons:phone" class="size-5 text-gray-400" />
                </twig:block>
            </twig:ui:input-addon>
        </div>
    {% endset %}
    {% set divideCode %}{% verbatim %}<twig:ui:input-addon name="phone" placeholder="Phone number" :divide="true">
    <twig:block name="before">
        <span class="text-gray-500 text-sm">+1</span>
    </twig:block>
    <twig:block name="after">
        <twig:ux:icon name="heroicons:phone" class="size-5 text-gray-400" />
    </twig:block>
</twig:ui:input-addon>{% endverbatim %}{% endset %}
    {{ ui.story('With Dividers', dividePreview, divideCode) }}

    {# Different Sizes #}
    {% set sizesPreview %}
        <div class="max-w-md space-y-4">
            <twig:ui:input-addon name="sm" placeholder="Small" size="sm">
                <twig:block name="before">
                    <twig:ux:icon name="heroicons:magnifying-glass" class="size-4 text-gray-400" />
                </twig:block>
            </twig:ui:input-addon>
            <twig:ui:input-addon name="md" placeholder="Medium (default)" size="md">
                <twig:block name="before">
                    <twig:ux:icon name="heroicons:magnifying-glass" class="size-5 text-gray-400" />
                </twig:block>
            </twig:ui:input-addon>
            <twig:ui:input-addon name="lg" placeholder="Large" size="lg">
                <twig:block name="before">
                    <twig:ux:icon name="heroicons:magnifying-glass" class="size-6 text-gray-400" />
                </twig:block>
            </twig:ui:input-addon>
        </div>
    {% endset %}
    {% set sizesCode %}{% verbatim %}<twig:ui:input-addon placeholder="Small" size="sm">
    <twig:block name="before">
        <twig:ux:icon name="heroicons:magnifying-glass" class="size-4 text-gray-400" />
    </twig:block>
</twig:ui:input-addon>

<twig:ui:input-addon placeholder="Medium" size="md">
    <twig:block name="before">
        <twig:ux:icon name="heroicons:magnifying-glass" class="size-5 text-gray-400" />
    </twig:block>
</twig:ui:input-addon>

<twig:ui:input-addon placeholder="Large" size="lg">
    <twig:block name="before">
        <twig:ux:icon name="heroicons:magnifying-glass" class="size-6 text-gray-400" />
    </twig:block>
</twig:ui:input-addon>{% endverbatim %}{% endset %}
    {{ ui.story('Different Sizes', sizesPreview, sizesCode) }}

    {# Filled Variant #}
    {% set filledPreview %}
        <div class="max-w-md">
            <twig:ui:input-addon name="search" placeholder="Search..." variant="filled">
                <twig:block name="before">
                    <twig:ux:icon name="heroicons:magnifying-glass" class="size-5 text-gray-400" />
                </twig:block>
            </twig:ui:input-addon>
        </div>
    {% endset %}
    {% set filledCode %}{% verbatim %}<twig:ui:input-addon name="search" placeholder="Search..." variant="filled">
    <twig:block name="before">
        <twig:ux:icon name="heroicons:magnifying-glass" class="size-5 text-gray-400" />
    </twig:block>
</twig:ui:input-addon>{% endverbatim %}{% endset %}
    {{ ui.story('Filled Variant', filledPreview, filledCode) }}
</div>
