{% import '@Ui/ui_library/_macros.html.twig' as ui %}

<div class="space-y-6">
    {# Props Documentation #}
    {{ ui.props([
        { name: 'name', type: 'string | null', default: 'null', description: 'Form field name prefix' },
        { name: 'length', type: 'number', default: '6', description: 'Number of OTP digits' },
        { name: 'size', type: "'sm' | 'md' | 'lg'", default: "'md'", description: 'Input size' },
        { name: 'disabled', type: 'boolean', default: 'false', description: 'Disabled state' },
        { name: 'autoFocus', type: 'boolean', default: 'true', description: 'Auto focus first input on mount' },
        { name: 'masked', type: 'boolean', default: 'false', description: 'Mask input (show dots instead of numbers)' },
        { name: 'class', type: 'string', default: "''", description: 'Additional CSS classes' },
    ]) }}

    {# Features #}
    <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6">
        <h4 class="font-semibold text-blue-900 dark:text-blue-100 mb-2">Features</h4>
        <ul class="text-sm text-blue-800 dark:text-blue-200 space-y-1">
            <li>• Auto-advance: Moves to next input after entering a digit</li>
            <li>• Paste support: Paste a full OTP code and it will fill all fields</li>
            <li>• Keyboard navigation: Use arrow keys to move between fields</li>
            <li>• Backspace: Deletes current digit and moves to previous field</li>
            <li>• Hidden input: Stores the complete OTP value for form submission</li>
        </ul>
    </div>

    {# Basic OTP Input #}
    {% set basicPreview %}
        <div>
            <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">
                Enter a 6-digit code. Try typing or pasting a code like "123456".
            </p>
            <twig:Ui:input:otp name="otp" :autoFocus="false" />
        </div>
    {% endset %}
    {% set basicCode %}{% verbatim %}<twig:Ui:input:otp name="otp" />{% endverbatim %}{% endset %}
    {{ ui.story('Basic OTP Input', basicPreview, basicCode) }}

    {# Different Lengths #}
    {% set lengthsPreview %}
        <div class="space-y-6">
            <div>
                <span class="text-xs text-gray-500 mb-2 block">4 digits</span>
                <twig:Ui:input:otp name="otp-4" :length="4" :autoFocus="false" />
            </div>
            <div>
                <span class="text-xs text-gray-500 mb-2 block">6 digits (default)</span>
                <twig:Ui:input:otp name="otp-6" :length="6" :autoFocus="false" />
            </div>
            <div>
                <span class="text-xs text-gray-500 mb-2 block">8 digits</span>
                <twig:Ui:input:otp name="otp-8" :length="8" :autoFocus="false" />
            </div>
        </div>
    {% endset %}
    {% set lengthsCode %}{% verbatim %}<twig:Ui:input:otp :length="4" />
<twig:Ui:input:otp :length="6" />
<twig:Ui:input:otp :length="8" />{% endverbatim %}{% endset %}
    {{ ui.story('Different Lengths', lengthsPreview, lengthsCode) }}

    {# Sizes #}
    {% set sizesPreview %}
        <div class="space-y-6">
            <div>
                <span class="text-xs text-gray-500 mb-2 block">Small</span>
                <twig:Ui:input:otp name="otp-sm" size="sm" :length="4" :autoFocus="false" />
            </div>
            <div>
                <span class="text-xs text-gray-500 mb-2 block">Medium (default)</span>
                <twig:Ui:input:otp name="otp-md" size="md" :length="4" :autoFocus="false" />
            </div>
            <div>
                <span class="text-xs text-gray-500 mb-2 block">Large</span>
                <twig:Ui:input:otp name="otp-lg" size="lg" :length="4" :autoFocus="false" />
            </div>
        </div>
    {% endset %}
    {% set sizesCode %}{% verbatim %}<twig:Ui:input:otp size="sm" />
<twig:Ui:input:otp size="md" />
<twig:Ui:input:otp size="lg" />{% endverbatim %}{% endset %}
    {{ ui.story('Sizes', sizesPreview, sizesCode) }}

    {# Masked #}
    {% set maskedPreview %}
        <div>
            <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">
                Masked mode hides the digits for additional security (useful for PINs).
            </p>
            <twig:Ui:input:otp name="otp-masked" :masked="true" :length="4" :autoFocus="false" />
        </div>
    {% endset %}
    {% set maskedCode %}{% verbatim %}<twig:Ui:input:otp name="pin" :masked="true" :length="4" />{% endverbatim %}{% endset %}
    {{ ui.story('Masked (PIN mode)', maskedPreview, maskedCode) }}

    {# Verification Example #}
    {% set verificationPreview %}
        <div class="max-w-sm mx-auto text-center">
            <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6">
                <div class="mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-12 h-12 mx-auto text-primary-500" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75" />
                    </svg>
                </div>
                <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Verify your email</h3>
                <p class="text-sm text-gray-600 dark:text-gray-400 mb-6">
                    We sent a code to your email. Enter it below to continue.
                </p>
                <div class="flex justify-center mb-6">
                    <twig:Ui:input:otp name="verify-otp" :autoFocus="false" />
                </div>
                <twig:Ui:button variant="primary" class="w-full">Verify</twig:Ui:button>
                <p class="text-sm text-gray-500 mt-4">
                    Didn't receive the code? <a href="#" class="text-primary-500 hover:underline">Resend</a>
                </p>
            </div>
        </div>
    {% endset %}
    {% set verificationCode %}{% verbatim %}{# Email verification example #}
<twig:Ui:input:otp name="verification_code" />
<twig:Ui:button variant="primary">Verify</twig:Ui:button>{% endverbatim %}{% endset %}
    {{ ui.story('Verification Example', verificationPreview, verificationCode) }}

    {# Disabled #}
    {% set disabledPreview %}
        <div>
            <twig:Ui:input:otp name="otp-disabled" :length="4" :autoFocus="false" disabled />
        </div>
    {% endset %}
    {% set disabledCode %}{% verbatim %}<twig:Ui:input:otp name="otp" disabled />{% endverbatim %}{% endset %}
    {{ ui.story('Disabled', disabledPreview, disabledCode) }}
</div>
