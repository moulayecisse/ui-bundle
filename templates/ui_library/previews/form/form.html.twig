{% import '@Ui/ui_library/_macros.html.twig' as ui %}

<div class="space-y-6">
    {# Props Documentation #}
    {{ ui.props([
        { name: 'form', type: 'FormView | null', default: 'null', description: 'Symfony form object' },
        { name: 'name', type: 'string | null', default: 'null', description: 'Form name attribute' },
        { name: 'method', type: 'string | null', default: 'null', description: 'Form method (GET, POST)' },
        { name: 'action', type: 'string | null', default: 'null', description: 'Form action URL' },
        { name: 'enctype', type: 'string | null', default: 'null', description: 'Form enctype' },
        { name: 'title', type: 'string | null', default: 'null', description: 'Form header title' },
        { name: 'description', type: 'string | null', default: 'null', description: 'Form header description' },
        { name: 'layout', type: "'vertical' | 'horizontal'", default: "'vertical'", description: 'Field layout direction' },
        { name: 'cols', type: 'number', default: '12', description: 'Grid columns' },
        { name: 'gap', type: 'number', default: '6', description: 'Grid gap' },
        { name: 'divide', type: 'boolean', default: 'false', description: 'Add dividers between rows' },
        { name: 'class', type: 'string', default: "''", description: 'Additional CSS classes' },
    ]) }}

    {# Nested Attributes #}
    {{ ui.slots([
        { name: 'header:*', description: 'Attributes passed to the header section' },
        { name: 'title:*', description: 'Attributes passed to the title element' },
        { name: 'description:*', description: 'Attributes passed to the description element' },
        { name: 'grid:*', description: 'Attributes passed to the grid container' },
        { name: 'footer:show', description: 'Show the footer section (hidden by default)' },
        { name: 'footer:class', description: 'Additional classes for footer section' },
        { name: 'submit:label', description: 'Submit button text (shows footer automatically)' },
        { name: 'submit:hide', description: 'Hide the submit button (boolean attribute)' },
        { name: 'submit:class', description: 'Additional classes for submit button' },
        { name: 'submit:*', description: 'Other attributes forwarded to submit button' },
        { name: 'cancel:label', description: 'Cancel button text (shows footer automatically)' },
        { name: 'cancel:hide', description: 'Hide the cancel button (boolean attribute)' },
        { name: 'cancel:class', description: 'Additional classes for cancel button' },
        { name: 'cancel:*', description: 'Other attributes forwarded to cancel button' },
    ]) }}

    {# Blocks #}
    {{ ui.slots([
        { name: 'header', description: 'Custom header content' },
        { name: 'content', description: 'Form fields content (default block)' },
        { name: 'footer', description: 'Custom footer content' },
    ]) }}

    {# Description #}
    <div class="prose prose-sm dark:prose-invert max-w-none mb-6">
        <p>
            The Form component provides a complete form wrapper with header, content grid, and footer sections.
            Use with <code>input-group</code> components for form fields.
            <strong>The footer is hidden by default</strong> and appears when <code>submit:label</code>, <code>cancel:label</code>, or <code>footer:show</code> is set.
        </p>
    </div>

    {# Basic Form (no footer by default) #}
    <div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden" data-controller="code-toggle">
        <div class="flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700">
            <h3 class="text-sm font-semibold text-gray-900 dark:text-white">Basic Form (no footer by default)</h3>
            <button type="button" data-code-toggle-target="button" data-action="code-toggle#toggle" class="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                <svg class="size-4" data-code-toggle-target="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg>
                <span>Show code</span>
            </button>
        </div>
        <div class="p-6 bg-gray-50 dark:bg-gray-900/30">
            <twig:ui:form action="#" method="POST" class="max-w-lg" title="Contact Us" description="Send us a message and we'll get back to you.">
                <twig:ui:input-group name="name" label:text="Name" input:placeholder="John Doe" />
                <twig:ui:input-group name="email" type="email" label:text="Email" input:placeholder="john@example.com" />
                <twig:ui:input-group name="message" type="textarea" label:text="Message" :col="12" input:placeholder="Your message..." />
            </twig:ui:form>
        </div>
        <div class="hidden border-t border-gray-200 dark:border-gray-700" data-code-toggle-target="code">
            <pre class="p-4 bg-gray-900 text-gray-100 text-sm overflow-x-auto"><code>{% verbatim %}{# Footer is hidden by default #}
<twig:ui:form action="#" method="POST" title="Contact Us" description="Send us a message.">
    <twig:ui:input-group name="name" label:text="Name" input:placeholder="John Doe" />
    <twig:ui:input-group name="email" type="email" label:text="Email" input:placeholder="john@example.com" />
    <twig:ui:input-group name="message" type="textarea" label:text="Message" :col="12" />
</twig:ui:form>{% endverbatim %}</code></pre>
        </div>
    </div>

    {# Settings Form #}
    <div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden" data-controller="code-toggle">
        <div class="flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700">
            <h3 class="text-sm font-semibold text-gray-900 dark:text-white">Custom Button Labels</h3>
            <button type="button" data-code-toggle-target="button" data-action="code-toggle#toggle" class="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                <svg class="size-4" data-code-toggle-target="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg>
                <span>Show code</span>
            </button>
        </div>
        <div class="p-6 bg-gray-50 dark:bg-gray-900/30">
            <twig:ui:form action="#" class="max-w-lg" title="Settings" submit:label="Save Changes" cancel:label="Discard">
                <twig:ui:input-group name="siteName" label:text="Site Name" input:placeholder="My Website" />
                <twig:ui:input-group name="timezone" label:text="Timezone" input:placeholder="UTC" />
                <twig:ui:input-group name="notifications" type="checkbox" label:text="Enable notifications" />
            </twig:ui:form>
        </div>
        <div class="hidden border-t border-gray-200 dark:border-gray-700" data-code-toggle-target="code">
            <pre class="p-4 bg-gray-900 text-gray-100 text-sm overflow-x-auto"><code>{% verbatim %}<twig:ui:form action="#" title="Settings" submit:label="Save Changes" cancel:label="Discard">
    <twig:ui:input-group name="siteName" label:text="Site Name" />
    <twig:ui:input-group name="timezone" label:text="Timezone" />
    <twig:ui:input-group name="notifications" type="checkbox" label:text="Enable notifications" />
</twig:ui:form>{% endverbatim %}</code></pre>
        </div>
    </div>

    {# Login Form Example #}
    <div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden" data-controller="code-toggle">
        <div class="flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700">
            <h3 class="text-sm font-semibold text-gray-900 dark:text-white">Login Form (full-width button)</h3>
            <button type="button" data-code-toggle-target="button" data-action="code-toggle#toggle" class="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                <svg class="size-4" data-code-toggle-target="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg>
                <span>Show code</span>
            </button>
        </div>
        <div class="p-6 bg-gray-50 dark:bg-gray-900/30">
            <twig:ui:form action="#" class="max-w-md" title="Bienvenue" description="Connectez-vous à votre compte." submit:label="Connexion" submit:class="w-full" footer:class="block">
                <twig:ui:input-group name="email" type="email" label:text="Email" :col="12" input:placeholder="vous@exemple.com" input:required />
                <twig:ui:input-group name="password" type="password" label:text="Mot de passe" :col="12" input:required />
                <twig:ui:input-group name="remember" type="checkbox" label:text="Se souvenir de moi" :col="12" />
            </twig:ui:form>
        </div>
        <div class="hidden border-t border-gray-200 dark:border-gray-700" data-code-toggle-target="code">
            <pre class="p-4 bg-gray-900 text-gray-100 text-sm overflow-x-auto"><code>{% verbatim %}<twig:ui:form action="/login" title="Bienvenue" description="Connectez-vous à votre compte." submit:label="Connexion" submit:class="w-full" footer:class="block">
    <twig:ui:input-group name="email" type="email" label:text="Email" :col="12" input:required />
    <twig:ui:input-group name="password" type="password" label:text="Mot de passe" :col="12" input:required />
    <twig:ui:input-group name="remember" type="checkbox" label:text="Se souvenir de moi" :col="12" />
</twig:ui:form>{% endverbatim %}</code></pre>
        </div>
    </div>

    {# Horizontal Layout Form #}
    <div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden" data-controller="code-toggle">
        <div class="flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700">
            <h3 class="text-sm font-semibold text-gray-900 dark:text-white">Horizontal Layout</h3>
            <button type="button" data-code-toggle-target="button" data-action="code-toggle#toggle" class="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                <svg class="size-4" data-code-toggle-target="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg>
                <span>Show code</span>
            </button>
        </div>
        <div class="p-6 bg-gray-50 dark:bg-gray-900/30">
            <twig:ui:form action="#" class="max-w-2xl" layout="horizontal" title="Profile Settings">
                <twig:ui:input-group name="username" label:text="Username" :col="12" input:placeholder="johndoe" />
                <twig:ui:input-group name="email" type="email" label:text="Email" :col="12" input:placeholder="john@example.com" />
                <twig:ui:input-group name="bio" type="textarea" label:text="Bio" :col="12" input:placeholder="Tell us about yourself..." />
            </twig:ui:form>
        </div>
        <div class="hidden border-t border-gray-200 dark:border-gray-700" data-code-toggle-target="code">
            <pre class="p-4 bg-gray-900 text-gray-100 text-sm overflow-x-auto"><code>{% verbatim %}<twig:ui:form action="#" layout="horizontal" title="Profile Settings">
    <twig:ui:input-group name="username" label:text="Username" :col="12" />
    <twig:ui:input-group name="email" type="email" label:text="Email" :col="12" />
    <twig:ui:input-group name="bio" type="textarea" label:text="Bio" :col="12" />
</twig:ui:form>{% endverbatim %}</code></pre>
        </div>
    </div>

    {# With Footer (explicit) #}
    <div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden" data-controller="code-toggle">
        <div class="flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700">
            <h3 class="text-sm font-semibold text-gray-900 dark:text-white">With Footer (footer:show)</h3>
            <button type="button" data-code-toggle-target="button" data-action="code-toggle#toggle" class="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                <svg class="size-4" data-code-toggle-target="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg>
                <span>Show code</span>
            </button>
        </div>
        <div class="p-6 bg-gray-50 dark:bg-gray-900/30">
            <twig:ui:form action="#" class="max-w-lg" title="Quick Search" footer:show submit:label="Search">
                <twig:ui:input-group name="query" type="search" label:text="Search" :col="12" input:placeholder="Search..." />
            </twig:ui:form>
        </div>
        <div class="hidden border-t border-gray-200 dark:border-gray-700" data-code-toggle-target="code">
            <pre class="p-4 bg-gray-900 text-gray-100 text-sm overflow-x-auto"><code>{% verbatim %}{# Use footer:show or set submit:label/cancel:label to show footer #}
<twig:ui:form action="#" title="Quick Search" footer:show submit:label="Search">
    <twig:ui:input-group name="query" type="search" label:text="Search" :col="12" />
</twig:ui:form>{% endverbatim %}</code></pre>
        </div>
    </div>

    {# Form Actions #}
    {% set actionsPreview %}
        <div class="space-y-4 max-w-lg">
            <p class="text-sm text-gray-500 dark:text-gray-400">Right aligned (default)</p>
            <twig:ui:form-actions>
                <twig:ui:button variant="ghost">Cancel</twig:ui:button>
                <twig:ui:button>Submit</twig:ui:button>
            </twig:ui:form-actions>
            <p class="text-sm text-gray-500 dark:text-gray-400">Space between</p>
            <twig:ui:form-actions class="justify-between">
                <twig:ui:button variant="ghost" class="text-red-600">Delete</twig:ui:button>
                <div class="flex gap-3">
                    <twig:ui:button variant="ghost">Cancel</twig:ui:button>
                    <twig:ui:button>Save</twig:ui:button>
                </div>
            </twig:ui:form-actions>
        </div>
    {% endset %}
    {% set actionsCode %}{% verbatim %}<twig:ui:form-actions>
    <twig:ui:button variant="ghost">Cancel</twig:ui:button>
    <twig:ui:button>Submit</twig:ui:button>
</twig:ui:form-actions>

<twig:ui:form-actions class="justify-between">
    <twig:ui:button variant="ghost" class="text-red-600">Delete</twig:ui:button>
    <div class="flex gap-3">
        <twig:ui:button variant="ghost">Cancel</twig:ui:button>
        <twig:ui:button>Save</twig:ui:button>
    </div>
</twig:ui:form-actions>{% endverbatim %}{% endset %}
    {{ ui.story('Form Actions Component', actionsPreview, actionsCode) }}
</div>
