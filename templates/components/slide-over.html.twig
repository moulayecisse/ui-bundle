{# templates/components/Ui/slide-over.html.twig #}
{% props
    title = '',
    description = '',
    position = 'right',
    size = 'default',
    closeOnBackdrop = true,
    closeOnEscape = true,
    open = false,
    class = ''
%}

{% set sizeClasses = {
    'sm': 'max-w-md',
    'default': 'max-w-2xl',
    'lg': 'max-w-4xl',
    'xl': 'max-w-6xl',
    'full': 'max-w-full'
} %}

{% set positionClasses = {
    'right': 'inset-y-0 right-0 pl-10 sm:pl-16',
    'left': 'inset-y-0 left-0 pr-10 sm:pr-16',
    'top': 'inset-x-0 top-0 pb-10 sm:pb-16',
    'bottom': 'inset-x-0 bottom-0 pt-10 sm:pt-16'
} %}

{% set slideOverClass = sizeClasses[size] ?? sizeClasses.default %}
{% set positionClass = positionClasses[position] ?? positionClasses.right %}

<div
        {{ attributes }}
        data-controller="cisse--ui-bundle--slide-over"
        data-cisse--ui-bundle--slide-over-close-on-backdrop-value="{{ closeOnBackdrop ? 'true' : 'false' }}"
        data-cisse--ui-bundle--slide-over-close-on-escape-value="{{ closeOnEscape ? 'true' : 'false' }}"
        data-cisse--ui-bundle--slide-over-open-value="{{ open ? 'true' : 'false' }}"
        data-cisse--ui-bundle--slide-over-position-value="{{ position }}"
        data-cisse--ui-bundle--slide-over-size-value="{{ size }}"
>
    <!-- Trigger -->
    <div data-action="click->cisse--ui-bundle--slide-over#toggle">
        {% block trigger %}
            <button class="px-4 py-3 text-sm font-medium text-white rounded-lg bg-primary-500 shadow-theme-xs hover:bg-primary-600 transition-colors">
                Open Slide-over
            </button>
        {% endblock %}
    </div>

    <!-- Slide-over -->
    <div
            data-cisse--ui-bundle--slide-over-target="slideOver"
            class="relative z-99999 {{ class }}"
            aria-labelledby="slide-over-title"
            role="dialog"
            aria-modal="true"
            aria-hidden="true"
            style="display: none;"
    >
        <!-- Backdrop -->
        <div
                data-cisse--ui-bundle--slide-over-target="backdrop"
                class="fixed inset-0 bg-gray-500/75 dark:bg-gray-950/75"
                aria-hidden="true"
        ></div>

        <!-- Panel Container -->
        <div class="fixed inset-0 overflow-hidden">
            <div class="absolute inset-0 overflow-hidden">
                <div class="pointer-events-none fixed {{ positionClass }} flex max-w-full">
                    <!-- Panel -->
                    <div
                            data-cisse--ui-bundle--slide-over-target="panel"
                            class="pointer-events-auto w-screen {{ slideOverClass }}"
                    >
                        <div class="flex h-full flex-col overflow-y-scroll bg-white dark:bg-gray-900 shadow-xl">
                            <div class="flex-1">
                                <!-- Header -->
                                <div class="bg-primary px-4 py-6 sm:px-6">
                                    <div class="flex items-start justify-between space-x-3">
                                        <div class="space-y-1">
                                            {% if title %}
                                                <h2 class="text-base font-semibold text-black" id="slide-over-title">
                                                    {{ title }}
                                                </h2>
                                            {% endif %}
                                            {% if description %}
                                                <p class="text-sm text-black/90">{{ description }}</p>
                                            {% endif %}
                                        </div>
                                        <div class="flex h-7 items-center">
                                            <button
                                                    data-cisse--ui-bundle--slide-over-target="closeButton"
                                                    data-action="click->cisse--ui-bundle--slide-over#close"
                                                    type="button"
                                                    class="relative text-black hover:text-black/90 transition-colors"
                                                    aria-label="Close slide-over"
                                            >
                                                <span class="absolute -inset-2.5"></span>
                                                <span class="sr-only">Close panel</span>
                                                <twig:ux:icon
                                                        name="heroicons:x-mark-16-solid"
                                                        class="size-6"
                                                />
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Content -->
                                <div class="relative flex-1 px-4 py-6 sm:px-6">
                                    {% block content '' %}
                                </div>
                            </div>

                            <!-- Footer -->
                            {% set footerContent %}{% block footer '' %}{% endset %}
                            {% if footerContent is not empty %}
                                <div class="shrink-0 border-t border-gray-200 dark:border-gray-800 px-4 py-5 sm:px-6">
                                    {{ footerContent|raw }}
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>