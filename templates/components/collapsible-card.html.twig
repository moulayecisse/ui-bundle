{# templates/components/Ui/collapsible-card.html.twig #}
{# Expandable/collapsible card component #}
{% props
    class = '',
    title = null,
    description = null,
    defaultExpanded = true,
    headerClass = 'w-full text-left',
    contentClass = ''
%}

{% set headerBlock %}{% block header '' %}{% endset %}
{% set actionsBlock %}{% block actions '' %}{% endset %}
{% set hasCustomHeader = headerBlock is not empty %}

{% set class = (class)|tailwind_merge %}

<div
    {{ attributes }}
    data-controller="cisse--ui-bundle--collapsible-card"
    data-cisse--ui-bundle--collapsible-card-expanded-value="{{ defaultExpanded ? 'true' : 'false' }}"
    class="{{ class }}"
>
    <twig:Ui:card>
        {# Header section - use ternary instead of if/else with blocks #}
        {{ hasCustomHeader ? include('@Ui/components/_collapsible-card-custom-header.html.twig', {
            headerClass: headerClass,
            headerBlock: headerBlock
        }) : '' }}
        {{ not hasCustomHeader ? include('@Ui/components/_collapsible-card-standard-header.html.twig', {
            title: title,
            description: description,
            defaultExpanded: defaultExpanded,
            actionsBlock: actionsBlock
        }) : '' }}

        {# Collapsible content #}
        <div
            data-cisse--ui-bundle--collapsible-card-target="content"
            class="overflow-hidden transition-all duration-200 ease-out {{ contentClass }}"
            style="{{ defaultExpanded ? '' : 'max-height: 0; opacity: 0;' }}"
        >
            <twig:Ui:card:content>
                {% block content '' %}
            </twig:Ui:card:content>
        </div>
    </twig:Ui:card>
</div>
