{# templates/components/Ui/menu/sub/item.html.twig #}
{% props
    active = null,
    href = null,
    label = null,
    icon = null,
    badge = null,
    badgeVariant = 'default',
    count = null,
    disabled = false,
    class = '',
%}

{% set rightBlock %}{% block right '' %}{% endset %}
{% set hasRightSlot = rightBlock is not empty or badge or count is not null %}

{# This component renders differently in inline submenu vs flyout #}
<li
    {{ attributes.without('class') }}
    data-active="{{ active ? 'true' : 'false' }}"
    class="group/sub {{ attributes.render('class') }}"
>
    <a
        href="{{ href ?? '#' }}"
        class="flex items-center gap-3 px-4 py-2 text-sm transition-colors {{ active ? 'bg-primary/10 text-primary dark:bg-primary/20 dark:text-primary-400' : 'text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700' }} {{ disabled ? 'opacity-50 pointer-events-none' : '' }}"
        {% if disabled %}aria-disabled="true"{% endif %}
    >
        {% block content %}
            {# Icon #}
            {% if icon %}
                <twig:ux:icon
                    name="{{ icon }}"
                    class="size-4 shrink-0"
                />
            {% endif %}

            {# Label #}
            <span class="flex-1">
                {% block label label %}
            </span>

            {# Right slot: badge, count, or custom content #}
            {% if hasRightSlot %}
                <span class="flex items-center gap-2">
                    {% if rightBlock is not empty %}
                        {{ rightBlock|raw }}
                    {% endif %}

                    {% if badge %}
                        <twig:Ui:badge variant="{{ badgeVariant }}" size="sm">{{ badge }}</twig:Ui:badge>
                    {% endif %}

                    {% if count is not null %}
                        <span class="text-xs font-medium {{ active ? 'text-primary/80' : 'text-gray-500' }}">
                            {{ count }}
                        </span>
                    {% endif %}
                </span>
            {% endif %}
        {% endblock %}
    </a>
</li>
