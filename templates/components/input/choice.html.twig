{% props
  type = 'choice',
  form = null,
  class = '',
  value = null,
  name = null,
  id = null,
  required = null,
  autofocus = null,
  autocomplete = null,
  disabled = null,
  invalid = false,
  choices = null,
%}

{% if form %}
    {% set name = name ?? form.vars.full_name %}
    {% set choices = choices ?? form.vars.choices ?? [] %}
{% endif %}

{% set params = {
    class,
    type,
    form,
    name,
    id,
    value,
    required,
    autofocus,
    autocomplete,
    disabled,
    invalid,
    attributes,
    options: choices ?? [],
} %}

{% set params = params|merge({ attributes }) %}
{% set contentBlock %}{% block content %}{% for option in choices ?? [] %}
{% set optionLabel = option.label ?? option.value  ??  option %}
{% set optionValue = option.value ??  option %}<twig:ui:option
    value="{{ optionValue }}"
    :selected="value == optionValue"
>
    {{ optionLabel }}
</twig:ui:option>{% endfor %}{% endblock %}{% endset %}

<twig:ui:select {{ ...params }}>
    {{ contentBlock|raw }}
</twig:ui:select>
