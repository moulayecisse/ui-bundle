{% props
  items = [],
  separator = 'heroicons:chevron-right',
  homeIcon = 'heroicons:home',
  showHomeIcon = true,
  class = '',
%}

<nav {{ attributes }} aria-label="Breadcrumb" class="{{ class }}">
  <ol class="flex items-center flex-wrap gap-1 text-sm">
    {% for item in items %}
      <li class="flex items-center">
        {# Separator #}
        {% if not loop.first %}
          <twig:ux:icon :name="separator" class="size-4 mx-2 text-gray-400 dark:text-gray-500 shrink-0" />
        {% endif %}

        {# Item #}
        {% set isLast = loop.last %}
        {% set itemClass = isLast
          ? 'text-gray-900 dark:text-white font-medium cursor-default'
          : 'text-gray-500 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400' %}

        {% if item.href is defined and item.href and not isLast %}
          <a href="{{ item.href }}" class="flex items-center gap-1.5 transition-colors {{ itemClass }}">
            {% if loop.first and showHomeIcon %}
              <twig:ux:icon :name="item.icon ?? homeIcon" class="size-4" />
            {% elseif item.icon is defined and item.icon %}
              <twig:ux:icon :name="item.icon" class="size-4" />
            {% endif %}
            <span>{{ item.label }}</span>
          </a>
        {% else %}
          <span class="flex items-center gap-1.5 transition-colors {{ itemClass }}" {% if isLast %}aria-current="page"{% endif %}>
            {% if loop.first and showHomeIcon %}
              <twig:ux:icon :name="item.icon ?? homeIcon" class="size-4" />
            {% elseif item.icon is defined and item.icon %}
              <twig:ux:icon :name="item.icon" class="size-4" />
            {% endif %}
            <span>{{ item.label }}</span>
          </span>
        {% endif %}
      </li>
    {% endfor %}
  </ol>
</nav>
