{% props
  title = '',
  subtitle = null,
  badge = null,
  badgeIcon = null,
  showBlobs = true,
  showWave = true,
  stats = [],
  colorScheme = 'primary',
  class = '',
%}

{% set colorSchemes = {
  'primary': { 'gradient': 'from-primary-600 via-primary-500 to-primary-400', 'subtitle': 'text-primary-100' },
  'cyan': { 'gradient': 'from-cyan-600 via-cyan-500 to-teal-500', 'subtitle': 'text-cyan-100' },
  'violet': { 'gradient': 'from-violet-600 via-violet-500 to-purple-500', 'subtitle': 'text-violet-100' },
  'emerald': { 'gradient': 'from-emerald-600 via-emerald-500 to-teal-500', 'subtitle': 'text-emerald-100' },
  'rose': { 'gradient': 'from-rose-600 via-rose-500 to-pink-500', 'subtitle': 'text-rose-100' },
  'amber': { 'gradient': 'from-amber-600 via-amber-500 to-orange-500', 'subtitle': 'text-amber-100' },
  'blue': { 'gradient': 'from-blue-600 via-blue-500 to-indigo-500', 'subtitle': 'text-blue-100' },
  'teal': { 'gradient': 'from-teal-600 via-teal-500 to-cyan-500', 'subtitle': 'text-teal-100' },
} %}

{% set colors = colorSchemes[colorScheme] ?? colorSchemes['primary'] %}

{% set content_block %}{% block content '' %}{% endset %}

<div {{ attributes }} class="{{ ('relative overflow-hidden bg-gradient-to-br ' ~ colors.gradient ~ ' ' ~ class)|tailwind_merge }}">
  {# Animated background blobs #}
  {% if showBlobs %}
    <div class="absolute inset-0 overflow-hidden pointer-events-none">
      <div class="absolute -top-20 -right-20 size-72 bg-white/10 rounded-full blur-3xl animate-pulse"></div>
      <div class="absolute -bottom-32 -left-32 size-96 bg-white/5 rounded-full blur-3xl animate-pulse" style="animation-delay: 1s;"></div>
    </div>
  {% endif %}

  <div class="relative px-4 pt-8 pb-10 sm:px-6 lg:px-8 max-w-5xl mx-auto">
    {# Header content #}
    <div class="text-center mb-8">
      {# Badge #}
      {% if badge or badgeIcon %}
        <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/15 backdrop-blur-sm border border-white/20 mb-4">
          {% if badgeIcon %}
            <svg xmlns="http://www.w3.org/2000/svg" class="size-5 text-white" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
              {{ badgeIcon|raw }}
            </svg>
          {% endif %}
          {% if badge %}
            <span class="text-sm font-medium text-white">{{ badge }}</span>
          {% endif %}
        </div>
      {% endif %}

      {# Title #}
      <h1 class="text-2xl sm:text-3xl font-bold text-white mb-2">
        {{ title }}
      </h1>

      {# Subtitle #}
      {% if subtitle %}
        <p class="text-sm sm:text-base {{ colors.subtitle }}">
          {{ subtitle }}
        </p>
      {% endif %}
    </div>

    {# Stats Grid #}
    {% if stats|length > 0 %}
      <div class="grid gap-3 sm:gap-4 {{ stats|length == 2 ? 'grid-cols-2' : '' }} {{ stats|length == 3 ? 'grid-cols-3' : '' }} {{ stats|length == 4 ? 'grid-cols-2 sm:grid-cols-4' : '' }} {{ stats|length > 4 ? 'grid-cols-2 sm:grid-cols-3 lg:grid-cols-4' : '' }}">
        {% for stat in stats %}
          <div class="bg-white/15 backdrop-blur-sm rounded-2xl p-4 border border-white/20 text-center">
            {% if stat.icon is defined %}
              <div class="size-10 mx-auto mb-2 rounded-xl bg-white/20 flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="size-5 text-white" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                  {{ stat.icon|raw }}
                </svg>
              </div>
            {% endif %}
            <div class="text-2xl sm:text-3xl font-bold text-white">{{ stat.value }}</div>
            <div class="text-xs sm:text-sm {{ colors.subtitle }}">{{ stat.label }}</div>
          </div>
        {% endfor %}
      </div>
    {% endif %}

    {# Additional content #}
    {{ content_block|raw }}
  </div>

  {# Wave decoration #}
  {% if showWave %}
    <div class="absolute bottom-0 left-0 right-0">
      <svg viewBox="0 0 1440 80" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-full h-auto" preserveAspectRatio="none">
        <path d="M0 80L60 74.7C120 69 240 59 360 53.3C480 48 600 48 720 53.3C840 59 960 69 1080 69.3C1200 69 1320 59 1380 53.3L1440 48V80H1380C1320 80 1200 80 1080 80C960 80 840 80 720 80C600 80 480 80 360 80C240 80 120 80 60 80H0Z" class="fill-gray-50 dark:fill-slate-900"/>
      </svg>
    </div>
  {% endif %}
</div>
