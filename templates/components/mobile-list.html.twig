{# templates/components/Ui/mobile-list.html.twig #}
{# Mobile-optimized list display component #}
{% props
    class = '',
    items = [],
    keyField = 'id',
    selectable = false,
    loading = false,
    loadingItems = 5,
    emptyLabel = 'No items found'
%}

{% set selectAllBlock %}{% block select_all '' %}{% endset %}
{% set contentBlock %}{% block content '' %}{% endset %}
{% set emptyBlock %}{% block empty '' %}{% endset %}

{% set class = ('space-y-3 ' ~ class)|tailwind_merge %}

<div
    {{ attributes }}
    data-controller="cisse--ui-bundle--mobile-list"
    data-cisse--ui-bundle--mobile-list-selectable-value="{{ selectable ? 'true' : 'false' }}"
    class="{{ class }}"
>
    {# Loading State #}
    {% if loading %}
        <twig:ui:card>
            <twig:ui:skeleton:list :items="loadingItems" showAvatar showSecondary showAction />
        </twig:ui:card>
    {% else %}
        {# Select All Header (when selectable) #}
        {% if selectable and items|length > 0 %}
            {% if selectAllBlock|trim %}
                {{ selectAllBlock|raw }}
            {% else %}
                <twig:ui:card>
                    <div class="flex items-center gap-3 p-3">
                        <twig:ui:input:checkbox
                            data-cisse--ui-bundle--mobile-list-target="selectAllCheckbox"
                            data-action="change->cisse--ui-bundle--mobile-list#selectAll"
                        />
                        <span class="text-sm text-gray-600 dark:text-gray-400">
                            Select all
                        </span>
                        <span
                            data-cisse--ui-bundle--mobile-list-target="selectedCount"
                            class="text-sm text-primary font-medium hidden"
                        ></span>
                    </div>
                </twig:ui:card>
            {% endif %}
        {% endif %}

        {# Items List - render the content block which should contain the loop #}
        {% if items|length > 0 %}
            {{ contentBlock|raw }}
        {% else %}
            {# Empty state #}
            {% if emptyBlock|trim %}
                {{ emptyBlock|raw }}
            {% else %}
                <twig:ui:card>
                    <div class="p-8 text-center">
                        <twig:ux:icon name="heroicons:inbox-20-solid" class="size-12 mx-auto text-gray-300 dark:text-gray-600" />
                        <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">{{ emptyLabel }}</p>
                    </div>
                </twig:ui:card>
            {% endif %}
        {% endif %}
    {% endif %}
</div>
